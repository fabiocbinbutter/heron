# HERON

HERON, short for Human Editable Relational Object Notation, is a text format that
is designed to enable one or more users to maintain a set of data via text embedded
into otherwise unstructured text.

### Contents

 - [Guiding Principles](#guiding-principles)
 - [HERON by Example](#heron-by-example)
   - [JSON Interop](#json-interop)
 - [Interactive Demo](#interactive-demo)
 - [Specification](#specification)


### Guiding principles

 - **No synchronous errors** - Data capture should never be at odds with users' natural note-taking, so any text is accepted by the HERON parser
 - **Reduced keystrokes** - Gestures are short and control characters are chosen for quick use with US QWERTY keyboards
 - **Relational model** - Every object gets a primary key, so updates are well-defined, and data can be queried via SQL or graph abstractions
 - **Context-free parsing** -If you start reading a HERON note in the middle, you only have to track back to the most recent [ character to know what syntax you're in
 - **Optional interoperability with JSON (TODO)** - A format is exposed to allow existing JSON libraries to 

### HERON by Example

##### Our First HERON Note
```
In HERON, data is embedded into otherwise freeform text. For example this is
a valid HERON note with no data. In fact, no syntax errors exist in HERON - every
text string is a valid HERON note
```

##### Embedding Objects
Within notes, embedded objects are initiated with square brackets
```
Here's an (empty) object - []

Objects are also terminated by EOF, or two consecutive line breaks.
So, this line has an empty object too [

Should a user need a literal square bracket character, they can escape it \[
```

##### Object Contents

There are four types of things that can be found inside of an object: An identifier, and any number of attributes, objects, and runs of free-form text. Let's see an example that uses all of these. (Line indentation has been added for readability but is not significant)

```
This README file describes [format name=Heron
	It's a super awesome text/data format
	created=2019
	author=[person name=Fabio Beltramini]
	[audience Humans] [audience SQL]
	]
```

##### The Role of Schema

The top-level object has a type

##### Implicit IDs

##### JSON Interop

*This functionality is not yet implemented in the reference parser. It still needs to be fleshed out*

To facilitate generating HERON notes using existing JSON libraries, HERON parsers
will also allow a JSON interoperability syntax - any HERON object that:

	- contains JSON for an object
	- does not contain any double line breaks
	- does not contain unescaped opening or closing square brackets

...can define a set of HERON objects. In particular, this would usually be the first
and only element in a note that chooses to use this syntax. For example,:

```
[{
	"format:JSON": {"isUbiquitous": "yes"},
	"format:HERON":{"isAwesome": "yes"},
	"format:text":{"":"The text contexts of an object are in a blank key, which could not otherwise be generated by textual input"}
}]
```

The resulting text is both valid JSON and valid & useful HERON

Note that the JSON object used must not contain arrays, because:
 1. HERON, being a relational format, does not use arrays to being with. All object require a key and thus are represented as members of a JSON object
 2. JSON arrays would use unescaped square brackets, which are not permitted as a part of the JSON interop syntax
